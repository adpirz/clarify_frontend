language: node_js
node_js:
  - 9
cache:
  directories:
    - node_modules
  yarn: true
install:
  - npm install
  - npm i aws-sdk
jobs:
  include:
    - stage: deploy to production
      script: bash deploy.sh
      env:
        - REACT_APP_BASE_URL=https://api.clarify.school/
        - REACT_APP_CLEVER_CLIENT_ID=0e7e4366758852e8c894
        - REACT_APP_CLEVER_REDIRECT_URL=https://app.clarify.school
        - secure: TDF0q5VjXKN3OChWx/pa0UsI9BAtmoyuvd5Se3YU5oQyWTkxHBvXob5N1/5Oefc8jBoxfDgDoQVJPxfElK9g5iFVoMNetLABcfaZr2FV3q8KuiYScFhigBDHRN0uTy1jQ11GOT/1UQloWCF4AmhNFxxeokjPGCvHQb2Hv5kTsmkx5perekr530IgJhGvjb7jLPTjplIriNDPsfzf3jIXbQAetsla/xn2LDsUF+a/T1Fz6uTVbaxnybforEQ1eMlopEus6y22sbOkR0eBZyZUVgeejTn/pOez4+M2owSpML8L0BM+cdTRcKHmUokgJ3bVWDebbRqsvyneIOKkuGfSYzKgAhiRlXk7U9ZcO1EBASw15micQ4fosog6rS0uhzjRYtheem3swe4c6w035Ba6HDgMCNUOTZksyyds5NMRgpmnA4k7D+G3axaiOugJi/uk7hTyr/NiYaPmSeolfpDxWBD7/XEnfsNag6aYtaugDKmJjRoCpH+QB8SEvEXQPIi2E9ljaDdzpDZyJ+vXlpX5Fv5M3UzMV+B+GQI8jvlhKQXPvCH3HqJLlLGDx9ijWsmCohLM847yh+DUHKl6YML7siPtxdI3pi9KZWmG9DQ3nCiRQ57VLlIjU4UXlJ5b2wvZZe/9s+D50hefPBB3liL+NUd6hH6IJa2SQSsEMNLW4M4=
      deploy:
        provider: s3
        bucket: clarify.school
        local_dir: build
        region: us-west-1
        skip_cleanup: true
        secret_access_key:
          secure: akEjOdKtB/XHxZvpm8hR4TIyE9Iliqa9cOXdVWAuddYcRiEqd0mE67sDuBWWraCXFkZdXDmfA+uKXS6xYpvSBtHASniiveNxNaNq8dlbHZZOD2A8qbrNz5rdjl/gPk2wWnelM0LviF/Iq1/al1rUWkTW5YRhvon8MRekMR5QtclH6fe7XwXRc996ne6/ALk+khHoedBYjdp0Lu0DeKngtVPOTNE7NbDzWftlZtfL8A0UHmwKb3kA0hDr5S5XlfljxTsS3Z2MsxJuy/p2UkVhA0ab5FfCOHuZZszEFEDbYb5JVzjFbo0BbxpnpWbORVsvacvaVGJro+dIVQg2TbavNN6CRxUoosorSfljkr55bDIowNRsh3LEJruUv56GeGEJQ/5Qzvqve/hIYOhKAMc8gLhpZddT+QdMmW+IWKyylSiBVQmjhZLxb9ZEPElkFmPFIXtje9eTdYmjlcCbjOHXeTr5sYAZ8meC0dDaK+Tk7qZTvwrgn90/yBaFlulKxvpAN+ZQUd24y8gySpoyQGyZXomyH4QrUi6369/pHXMv9FFJ2r7TSIJ4q5dVGVAz3m0nfvt3LqXLR58yjdyXM3CieRsZ+mg5i4oojVhZc8WPXYSh02exazEWMdhWjZ+LmPC9uwd8lXgD50yaOIHWoVsfCEhpSMArHwCiw0k/qhyIoz8=
        access_key_id:
          secure: iVoqrlBPA4Bp5yGe6X4YEA3nMuzScmlOJR9WAa8C1MxBZ1xE88e5nacrAgJaTHv2r73oyjv6uqT8ds9z621BQgVmK45ROnNXhUH9QH5m62V2hvBksfSV/l37c3drZL5oWo92mGUKJawt0cfxrLs9Llx/dVRPj//yG1NXjbxSyQhwPaIqzNVPhTXlWFsGOzLBbaz6kzVdBiPGJJsJu5jn/c6yAoM7d4OVsq6q/gNYifnrSLdvl/6Ub5JWGqZVTzJPYfV+akuaWkHKbEBIz8TVdf9mQnbWFSCi1kXO4kWPChBNV15+iGDCuTbwanZGh1BVylWO+CASPY4RlO0/oLf45tSsfiY40hIyID4sMcw4vp8KYStDlIRg/02SlYBGwZDgHVWjnApjC9kSyP8ON2FUn7/xepDQItqkfBXNa3HRBV41ktmPqhbTqlu+BqcSG/Ik7uBRKz/AqalyqpMfQRZVX7Ujn2Muf60LNnR500PIECy/o2uMvnxGNaCgbTTctnyAMdXU0qLKffnD/lqf4ZQrkhQ3ZuWUrTHVol83Yyu3P4M0fFbgAofd40J6ZrhIZHVgtu4ZPyb9ehVIm1+HidZP/QBnpe4dQaPqwccl7JvnCQ6TJmgwlsKgB5WnoUIwstmuRs+Lq+UG0JQL8MuKpZxzUAHCQrTrxuXsxECZdMcNxR4=
      after_deploy: npm run travis_after_deploy
    - stage: deploy to demo
      script: bash deploy.sh
      env:
        - REACT_APP_BASE_URL=https://demo.api.clarify.school/
        - secure: HbLYt6rveiteYyIK8eHpa7tc0e+bSmPzYl+crN+c8oO0I5uNToIGlL5bxedm3gTFHoIKlCMYkgVTz+V6GNiQmOH6bZrhkGRbhJHy5rWEOqV3sOFKnfKUgrouc7acit+33i76YkV17UHG9+lm+Rot/afpHGWuLASJSX2CuEUo8y1lOsvL4xhBpngad11ztJk9IO7tzxJLyD2oV99YSzhpZN47xsDTBdzUXV/BcwakdAwQAfzT0bzKVvofofGwvtY2QmqABVMbam/bmQjbHleSMidNwEkUF/TEo+GbzRggNK3W3fY5MiC2LQUorh++UaGVTXS2QGaVqdvew2iV90Txnu3PmfeiCam6adlqwPFSl7i31etefLA9yrJ+3Dp0RAntpUfdp9dQgGfra0KNUZxq5Bt9Jcqi1NthnXp6708ykinL8qqbuMwzT9yA1ZafKe5gPk7wpgSxkQJp908WOKbR+SddrFRZffP54tTHqeHkKPiv5Wj1lElbmhMr1l5jqUk2F0wSIGVMU3wFGYCEq9iwmdqWVWnZISxEzLQemWy9njNFHj12ujNEldiBQEBBh9p3he25wPXm2VrqubcUgDgqrkaJwKec2ypUHUvyTG5OXPIgj0o2+h0Nq6PlpJ1DpRhlsz3CdBADIrwR5aLwT7hCEOllNmVdQdpwYDJSD6sFysY=
      deploy:
        provider: s3
        bucket: demo.clarify.school
        local_dir: build
        region: us-east-1
        skip_cleanup: true
        secret_access_key:
          secure: akEjOdKtB/XHxZvpm8hR4TIyE9Iliqa9cOXdVWAuddYcRiEqd0mE67sDuBWWraCXFkZdXDmfA+uKXS6xYpvSBtHASniiveNxNaNq8dlbHZZOD2A8qbrNz5rdjl/gPk2wWnelM0LviF/Iq1/al1rUWkTW5YRhvon8MRekMR5QtclH6fe7XwXRc996ne6/ALk+khHoedBYjdp0Lu0DeKngtVPOTNE7NbDzWftlZtfL8A0UHmwKb3kA0hDr5S5XlfljxTsS3Z2MsxJuy/p2UkVhA0ab5FfCOHuZZszEFEDbYb5JVzjFbo0BbxpnpWbORVsvacvaVGJro+dIVQg2TbavNN6CRxUoosorSfljkr55bDIowNRsh3LEJruUv56GeGEJQ/5Qzvqve/hIYOhKAMc8gLhpZddT+QdMmW+IWKyylSiBVQmjhZLxb9ZEPElkFmPFIXtje9eTdYmjlcCbjOHXeTr5sYAZ8meC0dDaK+Tk7qZTvwrgn90/yBaFlulKxvpAN+ZQUd24y8gySpoyQGyZXomyH4QrUi6369/pHXMv9FFJ2r7TSIJ4q5dVGVAz3m0nfvt3LqXLR58yjdyXM3CieRsZ+mg5i4oojVhZc8WPXYSh02exazEWMdhWjZ+LmPC9uwd8lXgD50yaOIHWoVsfCEhpSMArHwCiw0k/qhyIoz8=
        access_key_id:
          secure: iVoqrlBPA4Bp5yGe6X4YEA3nMuzScmlOJR9WAa8C1MxBZ1xE88e5nacrAgJaTHv2r73oyjv6uqT8ds9z621BQgVmK45ROnNXhUH9QH5m62V2hvBksfSV/l37c3drZL5oWo92mGUKJawt0cfxrLs9Llx/dVRPj//yG1NXjbxSyQhwPaIqzNVPhTXlWFsGOzLBbaz6kzVdBiPGJJsJu5jn/c6yAoM7d4OVsq6q/gNYifnrSLdvl/6Ub5JWGqZVTzJPYfV+akuaWkHKbEBIz8TVdf9mQnbWFSCi1kXO4kWPChBNV15+iGDCuTbwanZGh1BVylWO+CASPY4RlO0/oLf45tSsfiY40hIyID4sMcw4vp8KYStDlIRg/02SlYBGwZDgHVWjnApjC9kSyP8ON2FUn7/xepDQItqkfBXNa3HRBV41ktmPqhbTqlu+BqcSG/Ik7uBRKz/AqalyqpMfQRZVX7Ujn2Muf60LNnR500PIECy/o2uMvnxGNaCgbTTctnyAMdXU0qLKffnD/lqf4ZQrkhQ3ZuWUrTHVol83Yyu3P4M0fFbgAofd40J6ZrhIZHVgtu4ZPyb9ehVIm1+HidZP/QBnpe4dQaPqwccl7JvnCQ6TJmgwlsKgB5WnoUIwstmuRs+Lq+UG0JQL8MuKpZxzUAHCQrTrxuXsxECZdMcNxR4=
      after_deploy: npm run travis_after_deploy
env:
  global:
    - secure: Qs98EglIvJZPS+908f/OAB4iBzRpVx5fbiSkxiHUT33i/hVhs0OV+uVFujSu8fPFSS6/bn9RyQFblrfkKS5TSpKEPhizQAXwvYef0gXX5KZd1jv00dmSN1k01ZlyydfWgDqFYvTbktVNnZIUZgYS2KYumV1oOwPdqaCJpVmbVlxYwcjhIPvIb78EhUMpawJChA7k9kMORLtPmmnv8b475Y57w1IkYF2mJ+R+rvJCT1ATnr9RBWBDPzMwELUzPSe6l9vtxTI6DB0XChPCoFVffzxMis3Zw/LlzOUT2kYR7Q6jX0ywHlp1YvUM9hE3mjTeqgczsfmIcMnbw8+oB554yCX64+mgppibqlutnYxuqVkFsGGp0DoZ20b3+D8gqg/wKweIeYWn/ox3AOALvLln7ZnMRKB26PSFunumzB3enPyJ3kZjRV2u7H4kf8LedKUjsIxQhMgeZ1je/ab5p8Zzyy4J7jBX18PHrYnFVS/wgE4fby3q2qsurfGyqRaTSADIMejMGooKdsIY/79qkCB7LZluewMYQjpSmRuo28HVuiHeyKPcemxDfgCnq5P5GaABE8FsEVLwzJCWZlw6BS9jium3BGgMu8lr2fNYfCNFZcuKkxC5gN+CNQ4xJd2Q8sL6fbeY2l74B2Ta5ZKvdB07mlJUg179gkaLN1/Upk2adjg=
    - secure: iditaRGQw2CzT8fyplW2Gf3EttkcPpRFkBGL/EKBHlzfNKBAsYxRQ1t6HLxP0wmDPDKGSg3H9EYWh5su5MD02F3dAvATIq0pIwaPaTQGQY06VdutT7bUTprEk+WGvX10eOybqp8pGZi+6LEyFlFEQQ11ummwUrnIbE3hsmXIxWLeTV+Z8ihEAS7bpx5cvI2AyvrJ6/V4RRHhnVG/StEQXWCnqyzBnW3CwaVPZAJpY5foxbbOJ0kzDikWilC2uUzSpAu4Bp1/Kq6Orso+/G6xH9HjNX0qw0h4rIEXQrMPekFl7ILsLro0aU+MeSFSAkfaOIw/woGvaWlclSJ8JLRwR4Vec16LaRHAFHeJeUIrbK1pNKzcArq2hnZh7nBS+kVLqzpCuEfIUMSvpJdAqoWoO5HNkpJb0Mhkc5UEAzfZ80AAwBzRUa8saKOq+jdW+ZPfcptVAqRmmJ2iLj5LrCe4lFHBsWLC6UoYvyWkyayHqUqrFnXTqcHod5wjBQ+R34yJOze4ISvAE4bihP1AaMO76+iKPxaxRyvj8vGBpGZta+hLcXQSCAak7Qy8lzV82Xz5hxicrMUw1G/a6edUHVEe77YVplXaPltRb110XQIxRAW/nsbdVe0rrFZzQ4dQjZ3Lz/p8j+T30K6NdpEZnyJN1jvZPDH3efTwKXq7a5UPRag=
cloudfront:
  app:
    secure: TDF0q5VjXKN3OChWx/pa0UsI9BAtmoyuvd5Se3YU5oQyWTkxHBvXob5N1/5Oefc8jBoxfDgDoQVJPxfElK9g5iFVoMNetLABcfaZr2FV3q8KuiYScFhigBDHRN0uTy1jQ11GOT/1UQloWCF4AmhNFxxeokjPGCvHQb2Hv5kTsmkx5perekr530IgJhGvjb7jLPTjplIriNDPsfzf3jIXbQAetsla/xn2LDsUF+a/T1Fz6uTVbaxnybforEQ1eMlopEus6y22sbOkR0eBZyZUVgeejTn/pOez4+M2owSpML8L0BM+cdTRcKHmUokgJ3bVWDebbRqsvyneIOKkuGfSYzKgAhiRlXk7U9ZcO1EBASw15micQ4fosog6rS0uhzjRYtheem3swe4c6w035Ba6HDgMCNUOTZksyyds5NMRgpmnA4k7D+G3axaiOugJi/uk7hTyr/NiYaPmSeolfpDxWBD7/XEnfsNag6aYtaugDKmJjRoCpH+QB8SEvEXQPIi2E9ljaDdzpDZyJ+vXlpX5Fv5M3UzMV+B+GQI8jvlhKQXPvCH3HqJLlLGDx9ijWsmCohLM847yh+DUHKl6YML7siPtxdI3pi9KZWmG9DQ3nCiRQ57VLlIjU4UXlJ5b2wvZZe/9s+D50hefPBB3liL+NUd6hH6IJa2SQSsEMNLW4M4=
  demo:
    secure: HbLYt6rveiteYyIK8eHpa7tc0e+bSmPzYl+crN+c8oO0I5uNToIGlL5bxedm3gTFHoIKlCMYkgVTz+V6GNiQmOH6bZrhkGRbhJHy5rWEOqV3sOFKnfKUgrouc7acit+33i76YkV17UHG9+lm+Rot/afpHGWuLASJSX2CuEUo8y1lOsvL4xhBpngad11ztJk9IO7tzxJLyD2oV99YSzhpZN47xsDTBdzUXV/BcwakdAwQAfzT0bzKVvofofGwvtY2QmqABVMbam/bmQjbHleSMidNwEkUF/TEo+GbzRggNK3W3fY5MiC2LQUorh++UaGVTXS2QGaVqdvew2iV90Txnu3PmfeiCam6adlqwPFSl7i31etefLA9yrJ+3Dp0RAntpUfdp9dQgGfra0KNUZxq5Bt9Jcqi1NthnXp6708ykinL8qqbuMwzT9yA1ZafKe5gPk7wpgSxkQJp908WOKbR+SddrFRZffP54tTHqeHkKPiv5Wj1lElbmhMr1l5jqUk2F0wSIGVMU3wFGYCEq9iwmdqWVWnZISxEzLQemWy9njNFHj12ujNEldiBQEBBh9p3he25wPXm2VrqubcUgDgqrkaJwKec2ypUHUvyTG5OXPIgj0o2+h0Nq6PlpJ1DpRhlsz3CdBADIrwR5aLwT7hCEOllNmVdQdpwYDJSD6sFysY=
